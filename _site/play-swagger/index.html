<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Play Swagger - Europa Tech Ltd</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Europa Tech Ltd" property="og:site_name">
  
    <meta content="Play Swagger" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="This post will be very short as you can find more details in my previous post related to the GCP Data Engineer certification." property="og:description">
  
  
    <meta content="http://localhost:4000/play-swagger/" property="og:url">
  
  
    <meta content="2017-05-14T11:32:20+01:00" property="article:published_time">
    <meta content="http://localhost:4000/about/" property="article:author">
  
  
    <meta content="http://localhost:4000/kevllino.github.io/assets/img/scala-logo.png" property="og:image">
  
  
    
  
  
    
    <meta content="Play" property="article:tag">
    
    <meta content="Swagger" property="article:tag">
    
    <meta content="Scala" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@KevinEID75# add your Twitter handle">
  
    <meta name="twitter:title" content="Play Swagger">
  
  
    <meta name="twitter:url" content="http://localhost:4000/play-swagger/">
  
  
    <meta name="twitter:description" content="This post will be very short as you can find more details in my previous post related to the GCP Data Engineer certification.">
  
  
    <meta name="twitter:image:src" content="http://localhost:4000/kevllino.github.io/assets/img/scala-logo.png">
  

	<meta name="description" content="This post will be very short as you can find more details in my previous post related to the GCP Data Engineer certification.">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/kevllino.github.io/assets/img/favicon/favicon.png" type="image/x-icon">
	<link rel="apple-touch-icon" href="/kevllino.github.io/assets/img/favicon/favicon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/kevllino.github.io/assets/img/favicon/favicon.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/kevllino.github.io/assets/img/favicon/favicon.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/kevllino.github.io/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/kevllino.github.io/assets/css/main.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/kevllino.github.io/"><img src="/kevllino.github.io/assets/img/kevineid.png" alt="Kevin Eid"></a>
      </div>
      <div class="author-name">Kevin Eid</div>
      <p>I'm Kevin Eid, Director and a data engineer at Europa Tech Ltd - where we provide our clients with bespoke and lean data analytics consulting services, ranging from cloud migration to implementation of big data pipelines and machine learning models. We bring skills and experience working with a range of clients - from FTSE 100 companies to US multinational firms to startups - across a range of industries, including information technology, financial services, telecommunications, and e-commerce.</p>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">Contact me</h3>
      <ul>
        
          <li><a href="https://twitter.com/KevinEID75# add your Twitter handle" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/kevllino" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="linkedin"><a href="https://in.linkedin.com/in/kevin-eid-b0168985" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        
        
          <li class="stack-exchange"><a href="https://stackoverflow.com/users/5387861/kevin-eid" target="_blank"><i class="fa fa-stack-exchange" aria-hidden="true"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2020 &copy; Europa Tech Ltd</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <figure>
        <img class="page-image" src=/kevllino.github.io/assets/img/scala-logo.png alt="Play Swagger">
        
      </figure>
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Play Swagger</h1>
        <div class="page-date"><span>2017, May 14&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <p>In order to document our API endpoints related to document stamping, we, at Nitro, chose to use Swagger in our Play application. However, we found it hard to find a guide about using this technology from scratch. My goal in this post is to make it easier for newcomers to get up and running with Play-Swagger.</p>

<h2 id="swagger">Swagger</h2>

<p>Swagger is a framework generating specifications which act as the RESTful contract for your API, detailing all of its resources and operations in a human and machine readable format for easy development, discovery, and integration. <a href="https://github.com/iheartradio/play-swagger">play-swagger</a> is a library written by <a href="https://github.com/iheartradio/play-swagger">iHeartRadio</a> that generates swagger specs from route files and case class reflection (no code annotation needed).</p>

<h2 id="configuration">Configuration</h2>

<p>To get you started, we will take the example of generating a specification for creating a stamp on a document. First, you should:</p>

<p>Add to plugin.sbt:</p>

<p><code class="highlighter-rouge">addSbtPlugin("com.iheart" % "sbt-play-swagger" % "0.5.4-PLAY2.4")</code></p>

<p>Enable the plugin in build.sbt in the folder containing your *.routes files:</p>

<p><code class="highlighter-rouge">lazy val server = project.settings(name := "service-name-server").enablePlugins(PlayScala, SwaggerPlugin)</code></p>

<p>Here are some additional configurations you need:</p>

<p>To generate specification for a specific case class, without having to detail it manually, you can define a schema pointing to this case class the following way:</p>

<p><code class="highlighter-rouge">$ref: '#/definitions/com.orgName.documents.signing.StampRequest'</code>.</p>

<p>To auto generate those swagger definitions, you will also need to add domain package names to play-swagger in build.sbt:</p>

<p><code class="highlighter-rouge">swaggerDomainNameSpaces := Seq("com.orgName.documents")</code></p>

<p>This will make classes and objects in documents visible and will enable you to reference them in your schema definitions.</p>

<h2 id="getting-started">Getting started</h2>

<p>To start documenting your endpoints, create 2 files in your conf directory:</p>

<ul>
  <li>swagger.yml: contains your basic configurations and definitions. You should add <code class="highlighter-rouge">Bearer &lt;token&gt;</code> to add authentication support to the swagger UI, that way you can test endpoints right from swagger.</li>
  <li>swagger-custom-mappings.yml: swagger may encounter some difficulties converting some case classes to json objects. In this file you define a set of mapping to help with the conversion. For example, swagger won’t be able to recognize our custom case classes defined in our custom <em>orgLibrary</em>, e.g. Id., the solution is to define a regex and map it to the expected type, e.g. we map com.orgName.orgLibrary.models.Id.* to string. Also you should manually define enum type fields.</li>
  <li>routes: add the documentation before a specific route definition:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>###
#  summary: some description
#  parameters:
#    MORE DETAILS IN our services
#  responses:
#    MORE DETAILS IN our services
###
</code></pre></div></div>
<p>And add the following route definition:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### NoDocs ###
GET   /docs/swagger.json            controllers.Assets.at(path ="/public", file = "swagger.json")
</code></pre></div></div>

<h2 id="swagger-ui">Swagger UI</h2>

<p>To test your definitions about custom input you can use the swagger UI, by having your Play application running it:</p>

<ul>
  <li>Add the following dependency:</li>
</ul>

<p><code class="highlighter-rouge">libraryDependencies += "org.webjars" % "swagger-ui" % "2.2.0"</code></p>

<ul>
  <li>Add to your route file:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### NoDocs ###
GET   /docs/swagger-ui/*file        controllers.Assets.at(path:String="/public/lib/swagger-ui", file:String)

### NoDocs ###
GET   /assets/*file                 controllers.Assets.versioned(path="/public", file: Asset)
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">sbt project/run</code> and then navigate to <a href="http://localhost:9000/docs/swagger-ui/index.html?url=/assets/swagger.json">swagger-ui</a></li>
</ul>

<p>Here’s an example of what can be seen in the swagger-ui, w.r.t. the stamp specification:</p>

<p><img src="/kevllino.github.io/assets/img/swagger/swagger_ui.png" alt="Specification for stamp in swagger-ui" />x</p>

<h2 id="debugging-with-swagger-editor">Debugging with Swagger Editor</h2>

<ol>
  <li>Run <code class="highlighter-rouge">sbt server/swagger</code> =&gt; this will generate a <code class="highlighter-rouge">swagger.json</code> file under <code class="highlighter-rouge">target/swagger</code></li>
  <li>Copy the output after using a json formatter, in IntelliJ (<code class="highlighter-rouge">Cmd + Alt + Shift + L</code>)</li>
  <li>Paste it in the <a href="http://editor.swagger.io/#/">swagger online editor</a></li>
</ol>

<h3 id="additional-information">Additional information</h3>

<ul>
  <li>To hide an endpoint documentation, include <code class="highlighter-rouge">### NoDocs ###</code> before the route definition.</li>
  <li>Swagger won’t recognize the <code class="highlighter-rouge">Iterable</code> type, hence, you might want to  convert it to <code class="highlighter-rouge">Seq</code></li>
</ul>

      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=Play Swagger&url=http://localhost:4000/play-swagger/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=http://localhost:4000/play-swagger/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
        </div>
        <div class="page-tag">
          
            <a href="/kevllino.github.io/tags#Play" class="tag">&#35; Play</a>
          
            <a href="/kevllino.github.io/tags#Swagger" class="tag">&#35; Swagger</a>
          
            <a href="/kevllino.github.io/tags#Scala" class="tag">&#35; Scala</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//kevo.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
